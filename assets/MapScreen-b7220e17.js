var u=Object.defineProperty;var D=(A,o,e)=>o in A?u(A,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):A[o]=e;var _=(A,o,e)=>(D(A,typeof o!="symbol"?o+"":o,e),e);import{a as P,c as V}from"./Library-3fb43614.js";import{d as v,r as i,_ as j,c,a as s,b as G,w as g,F as M,e as N,f as n,o as r,g as a,t as E}from"./index-176eecf3.js";class y{constructor(){_(this,"URL","https://calil.jp/library?appkey=a7606ce7ca5e7be0119f04b9092a72d9&geocode={geocode}&format=json&callback=")}async getLiblaries(o){return(await P.get(this.URL.replace("{geocode}",o))).data}}const O=new y,Y="/library_rader/assets/pin-66c3ed51.png",K=v({name:"MapScreen",setup(A){const o=i(Array()),e=i(!0),B=i(!0),l=i([139.7673068,35.6809591]),p=i("EPSG:4326"),C=i(14.5),Q=i(0),d=i([0]),w=localStorage.getItem("favorite_libralies")??"[]",I=i(JSON.parse(w));return{showMap:e,libraries:o,favorites:I,center:l,projection:p,zoom:C,rotation:Q,isLoading:B,coordinate:d,markerIcon:Y,calilUrl:V}},mounted(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(A=>{O.getLiblaries("139.7673068,35.680959").then(e=>{this.libraries=e,console.log(this.libraries),this.coordinate=e.flatMap(B=>{const l=B.geocode.split(",");return[Number(l[0]),Number(l[1])]})}),this.isLoading=!1},A=>{alert("位置情報の取得に失敗しました。"),this.isLoading=!1})},methods:{onClickList(){this.showMap=!this.showMap},onClickFavorite(A){this.favorites.push(A),localStorage.setItem("favorite_libralies",JSON.stringify(this.favorites))},onClickPoint(){console.log("onClickPoint")}}}),q="data:image/png;base64,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",b="/library_rader/assets/own-797cdd29.png",S="/library_rader/assets/favorite-eca8a2d2.png",T="/library_rader/assets/favorite_outline-5e62c9c9.png",J={class:"w-full h-full z-0"},z=s("img",{src:q},null,-1),X=[z],H=s("div",{class:"w-6 h-6"},[s("img",{src:b})],-1),L={key:1,class:"mt-4"},W={class:"p-3"},Z=["onClick"],x={key:0,class:"float-right w-8 h-8",src:S},$={key:1,class:"float-right w-8 h-8",src:T},AA={class:"w-fit font-bold text-xs mb-2 bg-slate-200"},oA={class:"w-fit font-medium"},eA=["href"],tA={class:"w-fit text-left text-sm"},sA={class:"text-right"},nA=s("hr",{class:"mr-6"},null,-1);function aA(A,o,e,B,l,p){const C=n("ol-view"),Q=n("ol-source-osm"),d=n("ol-tile-layer"),w=n("ol-overlay"),I=n("ol-geom-multi-point"),m=n("ol-style-icon"),f=n("ol-style"),F=n("ol-feature"),h=n("ol-source-vector"),k=n("ol-vector-layer"),U=n("ol-map");return r(),c("div",J,[s("div",{onClick:o[0]||(o[0]=(...t)=>A.onClickList&&A.onClickList(...t)),class:"z-10 bottom-16 right-4 absolute w-16 h-16 bg-primary text-lg font-bold rounded-full container shadow-md shadow-gray-500 py-4 px-4"},X),A.showMap?(r(),G(U,{key:0,loadTilesWhileAnimating:!0,loadTilesWhileInteracting:!0,style:{height:"100%"}},{default:g(()=>[a(C,{ref:"view",center:A.center,rotation:A.rotation,zoom:A.zoom,projection:A.projection},null,8,["center","rotation","zoom","projection"]),a(d,null,{default:g(()=>[a(Q)]),_:1}),a(w,{position:A.center},{default:g(t=>[H]),_:1},8,["position"]),a(k,null,{default:g(()=>[a(h,null,{default:g(()=>[a(F,null,{default:g(()=>[a(I,{coordinates:A.coordinate},null,8,["coordinates"]),a(f,null,{default:g(()=>[a(m,{src:A.markerIcon,scale:.1},null,8,["src","scale"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(r(),c("div",L,[(r(!0),c(M,null,N(A.libraries,t=>(r(),c("div",{key:t.libid},[s("div",W,[s("div",{onClick:R=>A.onClickFavorite(t)},[A.favorites.map(R=>R.libid).includes(t.libid)?(r(),c("img",x)):(r(),c("img",$))],8,Z),s("p",AA,E(t.city),1),s("p",oA,[s("a",{href:A.calilUrl(t.libid,t.formal),target:"_blank"},E(t.short),9,eA)]),s("p",tA,E(t.address),1),s("p",sA,E(t.distance.toFixed(2))+"km",1)]),nA]))),128))]))])}const cA=j(K,[["render",aA]]);export{cA as default};
